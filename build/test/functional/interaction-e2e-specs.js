"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

require("source-map-support/register");

var _webdriverio = require("webdriverio");

var _server = require("../../lib/server");

var _chaiAsPromised = _interopRequireDefault(require("chai-as-promised"));

var _chai = _interopRequireDefault(require("chai"));

var _utils = require("../utils");

var _utils2 = require("../../lib/utils");

_chai.default.should();

_chai.default.use(_chaiAsPromised.default);

const CAPS = {
  platformName: 'linux',
  'appium:appName': _utils.APP_NAME
};
describe('AtSpi2Driver - elements interaction', function () {
  this.timeout(_utils.MOCHA_TIMEOUT);
  let server;
  let driver;
  before(async function () {
    server = await (0, _server.startServer)(_utils.PORT, _utils.HOST);
  });
  after(async function () {
    if (server) {
      await server.close();
      server = null;
    }
  });
  beforeEach(async function () {
    driver = await (0, _webdriverio.remote)({
      hostname: _utils.HOST,
      port: _utils.PORT,
      capabilities: CAPS
    });
  });
  afterEach(async function () {
    if (driver) {
      try {
        await driver.deleteSession();
      } finally {
        driver = null;
      }
    }
  });
  it('should set a text to a text input control', async function () {
    const el = await driver.findElement('name', 'Find');
    await driver.executeScript('linux: click', [el.ELEMENT]);
    let txtEl = await driver.findElement('xpath', '(//text[@name="Search"])[1]');
    await driver.executeScript('linux: click', [txtEl.ELEMENT]);
    await driver.elementSendKeys(txtEl.ELEMENT, ['hello world']);
    await (0, _utils2.wait4sec)(0.5);
    txtEl = await driver.findElement('xpath', '(//text[@name="Search"])[1]');
    await driver.getElementText(txtEl.ELEMENT).should.eventually.eql('hello world');
  });
  it('should click a button', async function () {
    const el = await driver.findElement('name', 'Find');
    await driver.executeScript('linux: click', [el.ELEMENT]);
    const txtEls = await driver.findElements('xpath', '(//text[@name="Search"])[1]');
    txtEls.length.should.eql(1);
  });
});require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvZnVuY3Rpb25hbC9pbnRlcmFjdGlvbi1lMmUtc3BlY3MuanMiXSwibmFtZXMiOlsiY2hhaSIsInNob3VsZCIsInVzZSIsImNoYWlBc1Byb21pc2VkIiwiQ0FQUyIsInBsYXRmb3JtTmFtZSIsIkFQUF9OQU1FIiwiZGVzY3JpYmUiLCJ0aW1lb3V0IiwiTU9DSEFfVElNRU9VVCIsInNlcnZlciIsImRyaXZlciIsImJlZm9yZSIsIlBPUlQiLCJIT1NUIiwiYWZ0ZXIiLCJjbG9zZSIsImJlZm9yZUVhY2giLCJob3N0bmFtZSIsInBvcnQiLCJjYXBhYmlsaXRpZXMiLCJhZnRlckVhY2giLCJkZWxldGVTZXNzaW9uIiwiaXQiLCJlbCIsImZpbmRFbGVtZW50IiwiZXhlY3V0ZVNjcmlwdCIsIkVMRU1FTlQiLCJ0eHRFbCIsImVsZW1lbnRTZW5kS2V5cyIsImdldEVsZW1lbnRUZXh0IiwiZXZlbnR1YWxseSIsImVxbCIsInR4dEVscyIsImZpbmRFbGVtZW50cyIsImxlbmd0aCJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUFBLGNBQUtDLE1BQUw7O0FBQ0FELGNBQUtFLEdBQUwsQ0FBU0MsdUJBQVQ7O0FBRUEsTUFBTUMsSUFBSSxHQUFHO0FBQ1hDLEVBQUFBLFlBQVksRUFBRSxPQURIO0FBRVgsb0JBQWtCQztBQUZQLENBQWI7QUFLQUMsUUFBUSxDQUFDLHFDQUFELEVBQXdDLFlBQVk7QUFDMUQsT0FBS0MsT0FBTCxDQUFhQyxvQkFBYjtBQUVBLE1BQUlDLE1BQUo7QUFDQSxNQUFJQyxNQUFKO0FBQ0FDLEVBQUFBLE1BQU0sQ0FBQyxrQkFBa0I7QUFDdkJGLElBQUFBLE1BQU0sR0FBRyxNQUFNLHlCQUFZRyxXQUFaLEVBQWtCQyxXQUFsQixDQUFmO0FBQ0QsR0FGSyxDQUFOO0FBR0FDLEVBQUFBLEtBQUssQ0FBQyxrQkFBa0I7QUFDdEIsUUFBSUwsTUFBSixFQUFZO0FBQ1YsWUFBTUEsTUFBTSxDQUFDTSxLQUFQLEVBQU47QUFDQU4sTUFBQUEsTUFBTSxHQUFHLElBQVQ7QUFDRDtBQUNGLEdBTEksQ0FBTDtBQU1BTyxFQUFBQSxVQUFVLENBQUMsa0JBQWtCO0FBQzNCTixJQUFBQSxNQUFNLEdBQUcsTUFBTSx5QkFBTztBQUNwQk8sTUFBQUEsUUFBUSxFQUFFSixXQURVO0FBRXBCSyxNQUFBQSxJQUFJLEVBQUVOLFdBRmM7QUFHcEJPLE1BQUFBLFlBQVksRUFBRWhCO0FBSE0sS0FBUCxDQUFmO0FBS0QsR0FOUyxDQUFWO0FBT0FpQixFQUFBQSxTQUFTLENBQUMsa0JBQWtCO0FBQzFCLFFBQUlWLE1BQUosRUFBWTtBQUNWLFVBQUk7QUFDRixjQUFNQSxNQUFNLENBQUNXLGFBQVAsRUFBTjtBQUNELE9BRkQsU0FFVTtBQUNSWCxRQUFBQSxNQUFNLEdBQUcsSUFBVDtBQUNEO0FBQ0Y7QUFDRixHQVJRLENBQVQ7QUFVQVksRUFBQUEsRUFBRSxDQUFDLDJDQUFELEVBQThDLGtCQUFrQjtBQUVoRSxVQUFNQyxFQUFFLEdBQUcsTUFBTWIsTUFBTSxDQUFDYyxXQUFQLENBQW1CLE1BQW5CLEVBQTJCLE1BQTNCLENBQWpCO0FBQ0EsVUFBTWQsTUFBTSxDQUFDZSxhQUFQLENBQXFCLGNBQXJCLEVBQXFDLENBQUNGLEVBQUUsQ0FBQ0csT0FBSixDQUFyQyxDQUFOO0FBQ0EsUUFBSUMsS0FBSyxHQUFHLE1BQU1qQixNQUFNLENBQUNjLFdBQVAsQ0FBbUIsT0FBbkIsRUFBNEIsNkJBQTVCLENBQWxCO0FBQ0EsVUFBTWQsTUFBTSxDQUFDZSxhQUFQLENBQXFCLGNBQXJCLEVBQXFDLENBQUNFLEtBQUssQ0FBQ0QsT0FBUCxDQUFyQyxDQUFOO0FBQ0EsVUFBTWhCLE1BQU0sQ0FBQ2tCLGVBQVAsQ0FBdUJELEtBQUssQ0FBQ0QsT0FBN0IsRUFBc0MsQ0FBQyxhQUFELENBQXRDLENBQU47QUFDQSxVQUFNLHNCQUFTLEdBQVQsQ0FBTjtBQUVBQyxJQUFBQSxLQUFLLEdBQUcsTUFBTWpCLE1BQU0sQ0FBQ2MsV0FBUCxDQUFtQixPQUFuQixFQUE0Qiw2QkFBNUIsQ0FBZDtBQUNBLFVBQU1kLE1BQU0sQ0FBQ21CLGNBQVAsQ0FBc0JGLEtBQUssQ0FBQ0QsT0FBNUIsRUFBcUMxQixNQUFyQyxDQUE0QzhCLFVBQTVDLENBQXVEQyxHQUF2RCxDQUEyRCxhQUEzRCxDQUFOO0FBQ0QsR0FYQyxDQUFGO0FBYUFULEVBQUFBLEVBQUUsQ0FBQyx1QkFBRCxFQUEwQixrQkFBa0I7QUFFNUMsVUFBTUMsRUFBRSxHQUFHLE1BQU1iLE1BQU0sQ0FBQ2MsV0FBUCxDQUFtQixNQUFuQixFQUEyQixNQUEzQixDQUFqQjtBQUNBLFVBQU1kLE1BQU0sQ0FBQ2UsYUFBUCxDQUFxQixjQUFyQixFQUFxQyxDQUFDRixFQUFFLENBQUNHLE9BQUosQ0FBckMsQ0FBTjtBQUVBLFVBQU1NLE1BQU0sR0FBRyxNQUFNdEIsTUFBTSxDQUFDdUIsWUFBUCxDQUFvQixPQUFwQixFQUE2Qiw2QkFBN0IsQ0FBckI7QUFDQUQsSUFBQUEsTUFBTSxDQUFDRSxNQUFQLENBQWNsQyxNQUFkLENBQXFCK0IsR0FBckIsQ0FBeUIsQ0FBekI7QUFDRCxHQVBDLENBQUY7QUFTRCxDQXJETyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IHJlbW90ZSB9IGZyb20gJ3dlYmRyaXZlcmlvJztcbmltcG9ydCB7IHN0YXJ0U2VydmVyIH0gZnJvbSAnLi4vLi4vbGliL3NlcnZlcic7XG5pbXBvcnQgY2hhaUFzUHJvbWlzZWQgZnJvbSAnY2hhaS1hcy1wcm9taXNlZCc7XG5pbXBvcnQgY2hhaSBmcm9tICdjaGFpJztcbmltcG9ydCB7IEhPU1QsIFBPUlQsIE1PQ0hBX1RJTUVPVVQsIEFQUF9OQU1FIH0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IHsgd2FpdDRzZWMgfSBmcm9tICcuLi8uLi9saWIvdXRpbHMnO1xuXG5jaGFpLnNob3VsZCgpO1xuY2hhaS51c2UoY2hhaUFzUHJvbWlzZWQpO1xuXG5jb25zdCBDQVBTID0ge1xuICBwbGF0Zm9ybU5hbWU6ICdsaW51eCcsXG4gICdhcHBpdW06YXBwTmFtZSc6IEFQUF9OQU1FXG59O1xuXG5kZXNjcmliZSgnQXRTcGkyRHJpdmVyIC0gZWxlbWVudHMgaW50ZXJhY3Rpb24nLCBmdW5jdGlvbiAoKSB7XG4gIHRoaXMudGltZW91dChNT0NIQV9USU1FT1VUKTtcblxuICBsZXQgc2VydmVyO1xuICBsZXQgZHJpdmVyO1xuICBiZWZvcmUoYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIHNlcnZlciA9IGF3YWl0IHN0YXJ0U2VydmVyKFBPUlQsIEhPU1QpO1xuICB9KTtcbiAgYWZ0ZXIoYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGlmIChzZXJ2ZXIpIHtcbiAgICAgIGF3YWl0IHNlcnZlci5jbG9zZSgpO1xuICAgICAgc2VydmVyID0gbnVsbDtcbiAgICB9XG4gIH0pO1xuICBiZWZvcmVFYWNoKGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBkcml2ZXIgPSBhd2FpdCByZW1vdGUoe1xuICAgICAgaG9zdG5hbWU6IEhPU1QsXG4gICAgICBwb3J0OiBQT1JULFxuICAgICAgY2FwYWJpbGl0aWVzOiBDQVBTLFxuICAgIH0pO1xuICB9KTtcbiAgYWZ0ZXJFYWNoKGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoZHJpdmVyKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBkcml2ZXIuZGVsZXRlU2Vzc2lvbigpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgZHJpdmVyID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgc2V0IGEgdGV4dCB0byBhIHRleHQgaW5wdXQgY29udHJvbCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAvLyAxLiBzdGVwcyB0byBzZXQgdGV4dFxuICAgIGNvbnN0IGVsID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KCduYW1lJywgJ0ZpbmQnKTtcbiAgICBhd2FpdCBkcml2ZXIuZXhlY3V0ZVNjcmlwdCgnbGludXg6IGNsaWNrJywgW2VsLkVMRU1FTlRdKTtcbiAgICBsZXQgdHh0RWwgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoJ3hwYXRoJywgJygvL3RleHRbQG5hbWU9XCJTZWFyY2hcIl0pWzFdJyk7XG4gICAgYXdhaXQgZHJpdmVyLmV4ZWN1dGVTY3JpcHQoJ2xpbnV4OiBjbGljaycsIFt0eHRFbC5FTEVNRU5UXSk7XG4gICAgYXdhaXQgZHJpdmVyLmVsZW1lbnRTZW5kS2V5cyh0eHRFbC5FTEVNRU5ULCBbJ2hlbGxvIHdvcmxkJ10pO1xuICAgIGF3YWl0IHdhaXQ0c2VjKDAuNSk7XG4gICAgLy8gMi4gcmVmcmVzaCB0aGUgZWxlbWVudCBzdGF0ZVxuICAgIHR4dEVsID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50KCd4cGF0aCcsICcoLy90ZXh0W0BuYW1lPVwiU2VhcmNoXCJdKVsxXScpO1xuICAgIGF3YWl0IGRyaXZlci5nZXRFbGVtZW50VGV4dCh0eHRFbC5FTEVNRU5UKS5zaG91bGQuZXZlbnR1YWxseS5lcWwoJ2hlbGxvIHdvcmxkJyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgY2xpY2sgYSBidXR0b24nLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgLy8gMS4gY2xpY2sgb24gdGhlIEZpbmQgYnV0dG9uXG4gICAgY29uc3QgZWwgPSBhd2FpdCBkcml2ZXIuZmluZEVsZW1lbnQoJ25hbWUnLCAnRmluZCcpO1xuICAgIGF3YWl0IGRyaXZlci5leGVjdXRlU2NyaXB0KCdsaW51eDogY2xpY2snLCBbZWwuRUxFTUVOVF0pO1xuICAgIC8vIDIuIHRleHQgaW5wdXQgc2hvdWxkIGFwcGVhciBhZnRlciB0aGVuXG4gICAgY29uc3QgdHh0RWxzID0gYXdhaXQgZHJpdmVyLmZpbmRFbGVtZW50cygneHBhdGgnLCAnKC8vdGV4dFtAbmFtZT1cIlNlYXJjaFwiXSlbMV0nKTtcbiAgICB0eHRFbHMubGVuZ3RoLnNob3VsZC5lcWwoMSk7XG4gIH0pO1xuXG59KTtcbiJdLCJmaWxlIjoidGVzdC9mdW5jdGlvbmFsL2ludGVyYWN0aW9uLWUyZS1zcGVjcy5qcyIsInNvdXJjZVJvb3QiOiIuLi8uLi8uLiJ9
